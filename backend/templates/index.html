{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dream Travellers</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
  * {
    box-sizing: border-box;
}

html, body {
    max-width: 100% !important;
    overflow-x: hidden !important;
    margin: 0;
    overflow-x: hidden !important;
    font-family: 'Poppins', sans-serif;
}

body {
    background-color: #000; 
    background:
        linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.65)),
        url("{% static 'images/bgp.jpg' %}") center/cover no-repeat;
    background-attachment: fixed;
}

.background-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    pointer-events: none;
    z-index: -1;
}

  :root{
    --accent1:#00eaff;
    --accent2:#00ffbf;
    --glass-bg: rgba(255,255,255,0.12);
    --glass-strong: rgba(255,255,255,0.18);
    --muted: rgba(255,255,255,0.8);
    --card-radius: 14px;
  }

  html, body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden;
    color: #fff;
}


  /* Logo */
.top-left-logo {
  position: fixed;
  top: 28px;        /* More natural vertical spacing */
  left: 28px;       /* Slightly more inside */
  z-index: 2000;
}

.top-left-logo img {
  width: 150px;     /* Slightly larger for visibility */
  border-radius: 12px;
  filter: drop-shadow(0 0 10px rgba(255,255,255,0.7));
}

  /* Hero */
  .hero{height:70vh;display:flex;align-items:center;justify-content:center;text-align:center;padding-top:40px}
  .hero-content h1{margin:0;font-size:clamp(36px,6vw,64px);font-weight:700;text-transform:uppercase;background:linear-gradient(90deg,var(--accent1),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .tagline{margin-top:14px;font-size:18px;opacity:0.95}

  /* Cards */
  .card-row{width:100%;display:flex;justify-content:center;gap:34px;flex-wrap:wrap;margin-top:10px;margin-bottom:100px;padding:20px}
  .card{width:340px;background:rgba(255,255,255,0.14);backdrop-filter:blur(8px);border-radius:18px;padding:18px;border:1px solid rgba(255,255,255,0.08);transition:0.28s;display:flex;flex-direction:column}
  /* Center titles of all cards (About Us, Packages, Contact) */
.card .title {
    text-align: center !important;
    width: 100% !important;
}

/* Center underline animation */
.card .title::after {
    left: 50% !important;
    transform: translateX(-50%) !important;
}

  .card:hover{transform:translateY(-6px) scale(1.02);background:rgba(255,255,255,0.18)}
  .title{position:relative;margin-bottom:12px;font-size:18px;font-weight:600}
  .title::after{content:'';position:absolute;left:0;bottom:-8px;height:3px;width:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));border-radius:4px;transition:width .35s}
  .card:hover .title::after{width:100%}

.sub-title {
    font-size: 17px;
    font-weight: 600;
    margin-top: 16px;
    margin-bottom: 12px;
    text-align: center; /* same alignment style */
    position: relative;
    color: rgba(255,255,255,0.95);
}

/* Underline like ‚ÄúAbout Us‚Äù card title */
.sub-title::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -8px;
    height: 3px;
    width: 50px;
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
    border-radius: 4px;
}

/* Carousel */
  .carousel{border-radius:12px;overflow:hidden;position:relative;display:flex;flex-direction:column; background: rgba(0,0,0,0.06);}
  /* keep horizontal scroll but hide scrollbar UI (preserve touch scrolling) */
  .carousel-track{display:flex;transition:transform .6s ease;scroll-behavior:smooth;overflow-x:auto;-webkit-overflow-scrolling:touch; -ms-overflow-style: none; scrollbar-width: none;}
  .carousel-track::-webkit-scrollbar{ display: none; height: 0; }

  /* force each slide to be exactly the carousel width to prevent centering issues */
  .slide{min-width:100%; flex:0 0 100%; padding:18px 14px 80px 14px; box-sizing:border-box; position:relative; scroll-snap-align:center;}
  .img-wrap{ width:100%; overflow:hidden; border-radius:10px; }
  .slide img{width:100%;height:180px;object-fit:cover;border-radius:10px;box-shadow:0 8px 18px rgba(0,0,0,0.32)}
  .slide-content{margin-top:10px}
  .slide h3{margin:6px 0;font-size:16px}
  .slide p{margin:0;font-size:13px;color:rgba(255,255,255,0.92)}
  .carousel-dots{display:flex;justify-content:center;gap:8px;margin-top:10px;padding-bottom:6px}
  .carousel-dots span{width:10px;height:10px;background:rgba(255,255,255,0.35);border-radius:50%;cursor:pointer;transition:.22s}
  .carousel-dots .active{background:var(--accent2);transform:scale(1.2);box-shadow:0 0 8px var(--accent2)}

  /* Enquire Button on Slides */
  .enquire-btn{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);width:86%;padding:12px 14px;background:linear-gradient(135deg,var(--accent1),var(--accent2));border:none;border-radius:12px;color:#003;cursor:pointer;font-weight:700;text-align:center;box-shadow:0 6px 18px rgba(0,0,0,0.35)}
  .enquire-btn:hover{transform:translateX(-50%) scale(1.03)}

  /* Chatbot */
 /* Chatbot Toggle Button */
#web-chatbot-toggle {
  position: fixed;
  right: 20px;
  bottom: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent2), var(--accent1));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  cursor: pointer;
  z-index: 5000;
}

/* Chatbot Window */
#web-chatbot {
  position: fixed;
  right: 15px;
  bottom: 90px;

  width: 380px;
  max-width: 90vw;

  height: 520px;
  max-height: 80vh;

  border-radius: 16px;
  background: rgba(18,18,18,0.95);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(10px);

  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 5000;
}

/* Header (FIXED CLOSE BUTTON SPACING) */
#web-chatbot-header {
  padding: 16px 12px 12px 12px;   /* <-- This line FIXES the close button */
  background: linear-gradient(135deg, rgba(0,200,255,0.14), rgba(0,140,255,0.12));
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Close Button */
#web-chatbot-close {
  font-size: 22px;
  cursor: pointer;
}

/* Messages */
#web-chatbot-messages {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
  font-size: 14px;
}

/* Typing indicator */
#typing-indicator {
  font-size: 12px;
  padding: 6px 12px;
  display: none;
  opacity: 0.8;
}

/* Chat Input */
#chat-input-area {
  display: flex;
  padding: 10px;
  background: rgba(255,255,255,0.05);
  border-top: 1px solid rgba(255,255,255,0.08);
}

#chat-step-input {
  flex: 1;
  padding: 10px;
  background: rgba(255,255,255,0.1);
  border: none;
  border-radius: 8px;
  color: #fff;
}

#chat-step-send {
  margin-left: 8px;
  padding: 10px 16px;
  background: linear-gradient(135deg, var(--accent1), var(--accent2));
  border: none;
  border-radius: 8px;
  cursor: pointer;
  color: #003;
  font-weight: 600;
}

/* Message Bubbles */
.msg {
  margin-bottom: 12px;
  display: flex;
}

.msg.you {
  justify-content: flex-end;
}

.msg.bot {
  justify-content: flex-start;
}

.bubble {
  max-width: 80%;
  padding: 10px 14px;
  background: rgba(255,255,255,0.12);
  border-radius: 10px;
  white-space: pre-wrap;
}

.msg.you .bubble {
  background: linear-gradient(135deg, var(--accent1), var(--accent2));
  color: #003;
  font-weight: 600;
}

/* Buttons shown inside chat */
.action-btn {
  padding: 6px 12px;
  border: none;
  background: linear-gradient(135deg, var(--accent2), var(--accent1));
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  color: #003;
}

/* Mobile Fix */
@media (max-width: 1024px) {
  body {
    background-attachment: scroll !important;
  }
}

@media (max-width: 480px) {
  #web-chatbot {
    width: 95vw;
    height: 75vh;
    right: 2.5vw;
    bottom: 100px;
  }
  #web-chatbot-toggle {
    right: 15px;
    bottom: 15px;
  }
}



  /* Modal & Form - Travel Theme (D) */
  .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.55);backdrop-filter:blur(4px);display:none;justify-content:center;align-items:center;z-index:9999}
  .modal-box{width:94%;max-width:920px;max-height:90vh;overflow-y: auto !important;-webkit-overflow-scrolling: touch !important;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));border-radius:18px;padding:0;border:1px solid rgba(255,255,255,0.08);display:flex;align-items:stretch}
  .modal-left, .modal-right{padding:22px;overflow:auto}
  .modal-left{flex:1 1 60%;border-right:1px solid rgba(255,255,255,0.04)}
  .modal-right{width:320px;background:rgba(0,0,0,0.04);flex:0 0 320px;border-left:1px solid rgba(255,255,255,0.03)}

  .form-section{margin-bottom:18px;background:transparent}
  .form-section h3{margin:0 0 10px 0;font-size:16px;color:var(--muted)}
  .field-row{display:flex;gap:10px;align-items:center;margin-bottom:10px}
  .field{flex:1;display:flex;align-items:center;gap:10px;background:rgba(255,255,255,0.95);padding:10px;border-radius:10px;color:#000}
  .field i{width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;border-radius:6px;background:#f5f5f5;color:#444;font-size:14px}
  .field input[type="text"], .field input[type="tel"], .field input[type="email"], .field input[type="date"], .field input[type="number"], .field select, .field textarea{
    border:none;background:transparent;outline:none;font-size:14px;color:#000;width:100%;
  }
  .field textarea{resize:vertical}

  .summary-title{font-weight:700;margin-bottom:8px}
  .summary-card{background:rgba(255,255,255,0.06);padding:12px;border-radius:10px;color:#fff;border:1px solid rgba(255,255,255,0.04)}
  .summary-row{display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px}
  .summary-package{font-weight:700;margin-bottom:10px}

  .modal-actions{display:flex;gap:10px;margin-top:8px}
  .btn-primary{flex:1;padding:12px;border-radius:10px;border:none;background:linear-gradient(135deg,var(--accent1),var(--accent2));color:#003;font-weight:700;cursor:pointer}
  .btn-secondary{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff;cursor:pointer}

  /* Footer */
  .footer{width:100%;background:rgba(255,255,255,0.06);backdrop-filter:blur(10px);margin-top:60px;padding:40px 20px;text-align:center;color:#fff}
  .footer-content h2{font-size:28px;font-weight:600;margin-bottom:6px}
  .footer-social{margin:18px 0;display:flex;justify-content:center;gap:20px}
  .footer-social a{font-size:26px;color:#fff;transition:0.3s}
  .footer-copy{margin-top:20px;opacity:0.7;font-size:14px}
  .reviews-box{margin:30px auto;max-width:600px}
  .reviews-slider{display:flex;overflow-x:auto;gap:16px;scrollbar-width:none;padding:10px}
  .review-card{min-width:260px;background:rgba(255,255,255,0.12);padding:18px;border-radius:14px;scroll-snap-align:start;backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.15)}

  /* ================= MOBILE FIXES ================= */
/* Fix alignment for preview buttons */
.preview-buttons {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-top: 15px;
}

.preview-buttons .action-btn {
  width: 180px;        /* same width for both */
  text-align: center; 
}

/* Modern Contact Block */
.contact-modern {
  text-align: center;
  padding-top: 10px;
}

/* Floating Icons Row */
.contact-floating-icons {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin: 15px 0 20px;
}

.c-icon {
  width: 48px;
  height: 48px;
  background: rgba(255,255,255,0.18);
  backdrop-filter: blur(8px);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  transition: 0.3s;
  color: #fff;
}

.c-icon:hover {
  transform: scale(1.12);
  background: linear-gradient(135deg, var(--accent1), var(--accent2));
  color: #003;
}

/* QR Spotlight */
/* ---------- ENHANCED QR CODE ---------- */
.enhanced-qr {
  position: relative;
  width: 210px;
  height: 210px;
  margin: 0 auto;
  border-radius: 50%;
  padding: 12px;
  display: flex;
  justify-content: center;
  align-items: center;

  background: radial-gradient(circle at center,
      rgba(255,255,255,0.2) 0%,
      rgba(255,255,255,0.08) 40%,
      rgba(0,0,0,0.15) 80%);
  
  box-shadow:
    0 0 18px rgba(255,255,255,0.25),
    0 8px 28px rgba(0,0,0,0.35),
    inset 0 0 12px rgba(255,255,255,0.25);

  animation: qrFloat 4s ease-in-out infinite;
}

.enhanced-qr img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: contain;
}

/* Inner Glass Ring */
.qr-glass {
  position:absolute;
  width:100%;
  height:100%;
  border-radius:50%;
  backdrop-filter:blur(4px);
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  pointer-events:none;
}

/* Missing QR-glass-square (used in markup) */
{% comment %} .qr-glass-square {
  position:absolute;
  width:100%;
  height:100%;
  border-radius:16px;
  backdrop-filter:blur(4px);
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  pointer-events:none;
} {% endcomment %}


/* ---------- ENHANCED WHATSAPP BUTTON ---------- */
.enhanced-wa {
  margin-top: 12px;
  background: linear-gradient(135deg, #22ff8c, #10cc6a);
  font-size: 17px;
  padding: 14px;
  border-radius: 14px;

  box-shadow:
    0 0 10px rgba(34,255,140,0.5),
    0 4px 14px rgba(0,0,0,0.3);

  transition: 0.25s ease-in-out;
}

.enhanced-wa:hover {
  transform: scale(1.05);
  box-shadow:
    0 0 16px rgba(34,255,140,0.8),
    0 6px 18px rgba(0,0,0,0.35);
}


/* Mini contact details */
.contact-mini {
  margin-top: 16px;
  font-size: 13px;
  opacity: 0.88;
  line-height: 1.6;
}

.contact-mini i {
  width: 18px;
}

/* Location Pills */
.location-pills {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin: 18px 0;
}

.location-pills span {
  padding: 6px 12px;
  background: rgba(255,255,255,0.16);
  border-radius: 20px;
  font-size: 12px;
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,0.08);
}

/* WhatsApp Button */
.wa-btn {
  display: block;
  width: 100%;
  padding: 12px;
  background: linear-gradient(135deg, #25D366, #0fdd82);
  border-radius: 12px;
  text-align: center;
  color: #003;
  font-weight: 600;
  margin-top: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition: 0.3s;
}

.wa-btn:hover {
  transform: scale(1.03);
}
/* FIX: Remove oval QR on some screens */
.enhanced-qr img {
  aspect-ratio: 1 / 1;
}

/* Square QR container */
.enhanced-qr-square {
    width: 100px;
    height: 100px;
    margin: 0 auto;
    
    background: radial-gradient(circle at center,
        rgba(255,255,255,0.16) 0%,
        rgba(255,255,255,0.07) 40%,
        rgba(0,0,0,0.18) 80%
    );

    border-radius: 16px;
    padding: 10px;

    display: flex;
    justify-content: center;
    align-items: center;

    box-shadow:
        0 0 14px rgba(255,255,255,0.25),
        0 8px 22px rgba(0,0,0,0.35),
        inset 0 0 12px rgba(255,255,255,0.18);

    animation: qrFloat 4s ease-in-out infinite;
}

.enhanced-qr-square img {
    width: 75%;
    height: 75%;
    object-fit: cover;
    border-radius: 12px;
}
.slide {
    min-width: 100% !important;
    flex: 0 0 100% !important;
}

/* soft floating animation */
@keyframes qrFloat {
    0% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
    100% { transform: translateY(0); }
}
 /* =========================
   FINAL RESPONSIVE SYSTEM (A)
   ========================= */

/* ---------- large desktops ---------- */
@media (min-width:1400px) {
  .container { max-width:1400px; margin:auto; }
  .hero { padding:120px 40px 80px; height:72vh; }
  .hero-content h1 { font-size:64px; }
  .card { width:360px; }
}

/* ---------- tablet landscape ---------- */
@media (max-width:1024px) {
  .card-row { gap:28px; padding:18px; }
  .card { flex:1 1 calc(50% - 24px); max-width:calc(50% - 24px); }

  .modal-box { max-width:880px; }

  #web-chatbot { width:360px; height:66vh; right:14px; bottom:80px; }
  .dt-budget-box { max-width:820px; }

  .carousel-track .slide img { height:210px; }
}

/* ---------- small tablets + large phones ---------- */
@media (max-width:900px) {
  .card { flex:1 1 calc(50% - 18px); max-width:calc(50% - 18px); }

  .modal-box {
    flex-direction:column;
    margin:16px;
    max-height: 85vh !important;
    overflow-y: auto !important;
    overflow:auto;
  }

  .modal-right {
    width:100%;
    border-left:none;
    border-top:1px solid rgba(255,255,255,0.04);
    padding-top:16px;
  }

  .modal-left { border-right:none; }

  .carousel-track .slide { padding-bottom:80px; }

  .enquire-btn { width:88%; bottom:16px; }

  #web-chatbot {
    width:340px;
    height:64vh;
    right:12px;
    bottom:76px;
  }

  .field { padding:12px; }
}

/* ---------- mobile portrait (primary) ---------- */
@media (max-width:768px) {

  .hero {
    height:auto;
    padding:70px 12px 36px;
  }

  .hero-content h1 {
    font-size: clamp(26px,7vw,40px);
  }

  .card-row {
    flex-direction:column;
    align-items:center;
    gap:20px;
    padding:12px;
    margin-bottom:80px;
  }

  .card {
    width:94%;
    max-width:100%;
  }

  /* Carousel improvement */
  .carousel-track { scroll-snap-type:x mandatory; }
  .slide img { height:160px; }

  /* Enquiry modal stacked */
  .modal-box {
    width:96%;
    max-width:680px;
    border-radius:12px;
    flex-direction:column;
  }

  .modal-left, .modal-right { padding:18px; }
  .modal-right {
    order:2;
    width:100%;
    border-top:1px solid rgba(255,255,255,0.04);
    margin-top:8px;
  }

  .field-row { flex-direction:column; gap:10px; }
  .field { width:100%; }

  /* Chatbot & floating buttons */
  #web-chatbot {
    width:min(94vw,360px);
    right:3vw;
    bottom:84px;
    height:72vh;
  }

  #web-chatbot-toggle {
    right:14px;
    bottom:14px;
    width:56px;
    height:56px;
    font-size:24px;
  }

  {% comment %} .dt-floating-btn {
    right:16px;
    bottom:146px;
    width:56px;
    height:56px;
  } {% endcomment %}

  /* Contact */
  .c-icon { width:44px; height:44px; font-size:18px; }
  .enhanced-qr-square { width:150px; height:150px; }
}

/* ---------- small phones (<=480px) ---------- */
@media (max-width:480px) {

  .top-left-logo { top:10px; left:10px; }
  .top-left-logo img { width:92px; }

  .hero { padding:56px 10px 28px; }
  .hero-content h1 { font-size:24px; }

  .card { width:96%; padding:14px; }
  .slide img { height:140px; }

  #web-chatbot {
    width:94vw;
    right:3vw;
    bottom:92px;
    height:70vh;
  }

  #web-chatbot-toggle {
    right:12px;
    bottom:12px;
    width:50px;
    height:50px;
    font-size:22px;
  }

  {% comment %} .dt-floating-btn {
    right:12px;
    bottom:170px;
    width:52px;
    height:52px;
    font-size:22px;
  } {% endcomment %}

  .field { padding:10px; }

  .enhanced-qr-square { width:120px; height:120px; }
  .c-icon { width:40px; height:40px; }

  .preview-buttons .action-btn { width:140px; }
}
/* ================= FIX: Prevent logo overlapping hero heading on mobile ================ */

@media (max-width: 768px) {
    .top-left-logo {
        top: 12px;      /* reduce overlapping risk */
        left: 12px;
    }

    .top-left-logo img {
        width: 85px;
    }

    .hero {
        padding-top: 160px !important;  /* pushes hero text downward */
    }
}
@media (max-width: 768px) {
    .card {
        width: 92% !important; 
        margin: 0 auto;
    }
}

@media (max-width: 480px) {
    .top-left-logo {
        top: 6px;
        left: 8px;
    }

    .top-left-logo img {
        width: 80px !important; /* small but sharp */
    }

    .hero {
        padding-top: 155px !important;  /* ensures no overlap even on smallest screens */
    }
}
@media (max-width: 480px) {
    .slide {
        padding: 14px !important;
    }
    .slide img {
        height: 130px !important;
    }
}
.slide {
    box-sizing: border-box;
    max-width: 100% !important;
}


{% comment %} /* ================== FIX BUDGET CALCULATOR RESPONSIVENESS ================== */

/* Tablet & small laptop fixes */
@media (max-width: 992px) {
  .dt-budget-box {
      width: 90% !important;
      max-height: 90vh !important;
  }
}

/* Mobile View */
@media (max-width: 600px) {

  .dt-budget-box {
      width: 95% !important;
      border-radius: 14px !important;
      padding: 18px !important;
  }

  .dt-budget-body {
      padding: 0 !important;
  }

  /* Make form elements uniform */
  .dt-field,
  .dt-budget-box input,
  .dt-budget-box select {
      width: 100% !important;
      box-sizing: border-box !important;
      font-size: 15px !important;
      padding: 12px 14px !important;
      border-radius: 10px !important;
  }

  /* Reduce dropdown width overflow */
  .dt-select-wrap {
      width: 100% !important;
  }

  /* Button stacking */
  .dt-budget-actions {
      flex-direction: column !important;
      gap: 10px !important;
  }

  .dt-btn {
      width: 100% !important;
      padding: 14px !important;
      font-size: 16px !important;
  }

  /* Estimate Box mobile-friendly */
  .dt-estimate-box {
      padding: 16px !important;
      font-size: 14px !important;
  }

  .dt-estimate-row {
      font-size: 14px !important;
  }

  /* Prevent floating button overlap */
  #floatingBudgetBtn {
      bottom: 85px !important;
  }
}

/* Ultra-small screens fix (rare phones) */
@media (max-width: 380px) {
  .dt-btn {
      font-size: 14px !important;
      padding: 12px !important;
  }

  .dt-budget-box {
      padding: 12px !important;
  }
}
 /* Enable scrolling inside budget modal */
#dt-budgetModal {
    display: none;
    justify-content: center;
    align-items: center;
}

/* keep modal centered */
.dt-budget-box {
    max-height: 90vh !important;
    overflow: hidden !important;   /* prevent whole modal scroll */
    display: flex;
    flex-direction: column;
}

/* make ONLY the inner section scrollable */
.dt-budget-scroll-area {
    overflow-y: auto !important;
    padding-right: 6px; /* prevents scrollbar overlay */
    flex: 1;
}

#web-chatbot-toggle,
.dt-floating-btn {
    right: 12px !important;
}
#reviewsSlider {
    scroll-snap-type: x mandatory;
}

.review-card {
    scroll-snap-align: center;
}

/* ============================================
   FINAL FLOATING BUTTON ALIGNMENT (OVERWRITE ALL)
   ============================================ */

:root {
  --float-right: 20px;
  --float-gap: 14px;
  --float-size: 62px;
} {% endcomment %}

#web-chatbot-toggle {
  position: fixed;
  right: 20px;
  bottom: 20px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--accent2), var(--accent1));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  cursor: pointer;
  z-index: 5000;
}

/* ---- MOBILE FIXES ---- */
@media (max-width: 600px) {
  :root {
    --float-right: 16px;
    --float-size: 54px;
  }

  #web-chatbot-toggle {
    bottom: 20px !important;
  }
{% comment %} 
  #dt-floatingBudgetBtn {
    bottom: calc(20px + var(--float-size) + var(--float-gap)) !important;
  } {% endcomment %}
}
/* ===================== GLOBAL ENQUIRE BUTTON ===================== */
#global-enquiry-btn {
    position: fixed;
    top: 28px;            /* moved slightly down */
    right: 22px;
    padding: 10px 20px;
    background: linear-gradient(90deg, #00ffd0, #00ff88);
    color: #000;
    border-radius: 30px;
    font-weight: 600;
    z-index: 5000;
    box-shadow: 0px 5px 14px rgba(0,0,0,0.28);
    font-size: 14px;
}

#global-enquiry-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
}

/* MOBILE RESPONSIVE */
@media (max-width: 480px) {
    #global-enquiry-btn {
        top: 14px;
        right: 14px;
        padding: 10px 18px;
        font-size: 14px;
    }
}
.enquire-btn {
    display: none;
}
/* Better spacing for slides without bottom button */
.slide {
    padding: 18px 14px 30px !important; /* reduce bottom padding from 80px */
}

.slide-content {
    margin-top: 12px;
    text-align: left;
}

.img-wrap img {
    border-radius: 14px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.35);
}
/* ======================= FIX REVIEW SLIDER ALIGNMENT ======================= */

.reviews-slider {
    display: flex;
    gap: 18px;
    padding: 10px 0;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
}

.review-card {
    flex: 0 0 80%;                 /* card width scales with screen */
    max-width: 340px;              /* keeps on-center size clean */
    scroll-snap-align: center;
    border-radius: 16px;
    background: rgba(255,255,255,0.12);
    padding: 20px;
    backdrop-filter: blur(6px);
    border: 1px solid rgba(255,255,255,0.18);
}

/* Remove the weird left gap you have */
#reviewsSlider {
    padding-left: 0 !important;
}
.location-heading {
    text-align: center;
    margin-top: 18px;
    margin-bottom: 10px;
    font-size: 16px;
    font-weight: 600;
    color: rgba(255,255,255,0.9);
}
/* --- FIX CHATBOT ALIGNMENT ON MOBILE --- */
@media (max-width: 600px) {

    /* Chatbot window */
    #web-chatbot {
        width: 92vw !important;   /* fits mobile perfectly */
        right: 4% !important;     /* stays inside the screen */
        left: unset !important;
        bottom: 90px !important;  /* above floating buttons */
        border-radius: 14px;
    }

    /* Chatbot toggle icon */
    #web-chatbot-toggle {
        right: 16px !important;
        bottom: 16px !important;
        width: 56px !important;
        height: 56px !important;
        font-size: 22px !important;
    }

    /* Floating budget button */
    {% comment %} #dt-floatingBudgetBtn {
        right: 16px !important;
        bottom: 120px !important; /* stacked properly */
        width: 56px !important;
        height: 56px !important;
    } {% endcomment %}

    /* Message bubbles adjust */
    .bubble {
        max-width: 88% !important;
        font-size: 14px;
    }

    #chat-input-area {
        padding: 8px !important;
    }
}

.modal-box {
    flex-direction: column !important; /* so only left side shows */
}

.modal-left {
    width: 100% !important;
    border-right: none !important;
    padding: 24px !important;
}

.modal-right {
    display: none !important; /* hide summary if any remnants remain */
}

@supports (-webkit-touch-callout: none) {
  body {
    background-attachment: scroll !important;
    background-size: cover !important;
    background-position: center !important;
  }
}
/* TRUE FIXED BACKGROUND FOR MOBILE */
.mobile-fixed-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;

    background: 
        linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.65)),
        url("{% static 'images/bgp.jpg' %}") center/cover no-repeat;

    z-index: -2;
    pointer-events: none;

    /* ensures crisp display on iOS */
    transform: translateZ(0);
}

/* Remove old background on body */
body {
    background: none !important;
}
/* ===== FIX CHATBOT INLINE FORM FOR MOBILE ===== */
@media (max-width: 600px) {

    /* Make message bubbles wider so form fits naturally */
    .bubble {
        max-width: 95% !important;
        width: 95% !important;
    }

    /* Inline chatbot form container */
    .inline-form {
        width: 100% !important;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    /* Input inside chatbot */
    .inline-form input {
        width: 100% !important;
        padding: 10px 12px;
        border-radius: 8px;
        font-size: 14px;
    }

    /* OK / Skip button row */
    .inline-form div {
        display: flex !important;
        justify-content: space-between !important;
        width: 100% !important;
        gap: 10px;
    }

    /* Buttons */
    .inline-form button {
        flex: 1 1 auto;
        padding: 10px 0 !important;
        font-size: 14px !important;
        border-radius: 8px;
        text-align: center;
        white-space: nowrap;
    }
}
/* Make chatbot bubbles fit the screen on mobile */
@media (max-width: 600px) {
    .bubble {
        width: 95% !important;
        max-width: 95% !important;
        margin: 8px auto !important;
    }
}
/* Fix chatbot inline form layout */
@media (max-width: 600px) {

    .inline-form {
        width: 100% !important;
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 8px;
    }

    .inline-form input {
        width: 100% !important;
        padding: 12px;
        border-radius: 10px;
        font-size: 15px;
        border: 1px solid #ccc;
    }

    /* Button row */
    .inline-form .button-row,
    .inline-form div {
        width: 100% !important;
        display: flex !important;
        justify-content: space-between !important;
        gap: 10px;
    }

    /* Buttons */
    .inline-form button {
        flex: 1 !important;
        padding: 12px 0 !important;
        border-radius: 10px !important;
        font-size: 15px !important;
        font-weight: 600;
        white-space: nowrap;
    }
}
@media (max-width: 600px) {
    #web-chatbot-input-area {
        padding: 10px 12px !important;
        height: auto !important;
    }
}
.footer-icon {
    font-size: 26px;
    color: #ffffff;
    margin: 0 10px;
    transition: 0.2s;
}

.footer-icon:hover {
    color: #00e6a7; /* or any theme color */
    transform: scale(1.15);
}

/* SUCCESS POPUP */
#successPopup {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(3px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 99999;
}

.success-box {
    width: 280px;
    background: rgba(255,255,255,0.12);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    border: 1px solid rgba(255,255,255,0.15);
    box-shadow: 0 8px 30px rgba(0,255,150,0.35);
    animation: popIn 0.35s ease-out;
}

.success-box .tick {
    font-size: 42px;
    color: #00ff9d;
    margin-bottom: 10px;
    text-shadow: 0 0 12px rgba(0,255,150,0.65);
}

.success-box h3 {
    margin: 0;
    font-size: 20px;
    color: #fff;
}

.success-box p {
    margin-top: 6px;
    font-size: 14px;
    opacity: 0.9;
}

/* Popup Animation */
@keyframes popIn {
    0% { transform: scale(0.6); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

/* Center titles of all cards (About Us, Packages, Contact) */
.card .title {
    text-align: center !important;
    width: 100% !important;
}

/* Center underline animation */
.card .title::after {
    left: 50% !important;
    transform: translateX(-50%) !important;
}


  </style>
</head>
<body>
  <div class="mobile-fixed-bg"></div>
  <!-- Global Enquire Button (Top Right Floating) -->
<button id="global-enquiry-btn" onclick="openEnquiry('General Enquiry')">
    Enquire Now
</button>

  <div class="background-overlay"></div>
  <div class="top-left-logo">
    <img src="{% static 'images/logo.png' %}" alt="Dream Travellers Logo">
  </div>

  <section class="hero">
    <div class="hero-content">
      <h1>Explore The INDIAN CULTURE</h1>
      <div class="tagline">Discover memorable journeys crafted just for you</div>
    </div>
  </section>
  

  <section class="card-row">
    <div class="card">
      <h2 class="title"><i class="fa-solid fa-building"></i> About Us</h2>
     <p>
Today, we are a team of passionate travel advisors, travellers, seasoned local guides, and logistics experts, all united by a shared love of exploration.<br><br>
Our process is personal. We spend time getting to know your style, crafting 100% custom itineraries that reflect your pace, preferences, and personal bucket list.
</p>

<h3 class="sub-title"><i class="fa-solid fa-star"></i>Our Core Values</h3>
<p>
Integrity, Sustainability, Personal Service, Local Expertise, Safety, Accessibility.
</p>

    </div>

    <div class="card">
      <h2 class="title"><i class="fa-solid fa-suitcase-rolling"></i> Packages</h2>

      <div class="carousel" aria-hidden="false">
        <div class="carousel-track">

          <!-- Slide 1 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack1.jpg' %}" alt="Pack 1"></div>
            <div class="slide-content">
              <h3>Kochi ‚Äì Athirappilly ‚Äì Munnar ‚Äì Thekkady ‚Äì Alleppey ‚Äì Kochi</h3>
              <p>‚Ä¢ Forest ‚Ä¢ Hill Station ‚Ä¢ Backwaters ‚Ä¢ Water Sports</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Kochi ‚Äì Athirappilly ‚Äì Munnar ‚Äì Thekkady ‚Äì Alleppey ‚Äì Kochi')">Enquire Now</button>
          </div>

          <!-- Slide 2 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack2.jpg' %}" alt="Pack 2"></div>
            <div class="slide-content">
              <h3>Kochi ‚Äì Munnar ‚Äì Thekkady ‚Äì Alleppey ‚Äì Kovalam ‚Äì Kanyakumari ‚Äì Trivandrum</h3>
              <p>‚Ä¢ Beaches ‚Ä¢ Monuments ‚Ä¢ Culture</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Kochi ‚Äì Munnar ‚Äì Thekkady ‚Äì Alleppey ‚Äì Kovalam ‚Äì Kanyakumari ‚Äì Trivandrum')">Enquire Now</button>
          </div>

          <!-- Slide 3 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack3.jpeg' %}" alt="Pack 3"></div>
            <div class="slide-content">
              <h3>Kochi ‚Äì Munnar ‚Äì Thekkady ‚Äì Vagamon ‚Äì Alleppey ‚Äì Kochi</h3>
              <p>‚Ä¢ Hills ‚Ä¢ Forest ‚Ä¢ Backwaters ‚Ä¢ Water Sports</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Kochi ‚Äì Munnar ‚Äì Thekkady ‚Äì Vagamon ‚Äì Alleppey ‚Äì Kochi')">Enquire Now</button>
          </div>

          <!-- Slide 4 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack4.jpg' %}" alt="Pack 4"></div>
            <div class="slide-content">
              <h3>Kannur ‚Äì Coorg ‚Äì Wayanad ‚Äì Calicut</h3>
              <p>‚Ä¢ Wildlife ‚Ä¢ Hill Station ‚Ä¢ Backwaters</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Kannur ‚Äì Coorg ‚Äì Wayanad ‚Äì Calicut')">Enquire Now</button>
          </div>

          <!-- Slide 5 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack5.jpg' %}" alt="Pack 5"></div>
            <div class="slide-content">
              <h3>Kannur ‚Äì Coorg ‚Äì Mysore ‚Äì Wayanad ‚Äì Calicut</h3>
              <p>‚Ä¢ Wildlife ‚Ä¢ Hills ‚Ä¢ Backwaters ‚Ä¢ City Tour</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Kannur ‚Äì Coorg ‚Äì Mysore ‚Äì Wayanad ‚Äì Calicut')">Enquire Now</button>
          </div>

          <!-- Slide 6 -->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack6.jpg' %}" alt="Pack 6"></div>
            <div class="slide-content">
              <h3>Enquiry Based Bookings To Other States</h3>
              <p>Rajasthan - Gujarat - Punjab - Delhi -Jammu & Kashmir</p> 
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Rajasthan - Gujarat - Punjab - Delhi -Jammu & Kashmir')">Enquire Now</button>
          </div>

           <!-- Slide 7-->
          <div class="slide">
            <div class="img-wrap"><img src="{% static 'images/pack7.jpg' %}" alt="Pack 6"></div>
            <div class="slide-content">
              <h3>Day Tour - Group Packages - Couple Package - Honeymoon Package</h3>
              <p>Enquiry Based Bookings To All Destinations In Kerala</p>
            </div>
            <button class="enquire-btn" onclick="openEnquiry('Rajasthan - Gujarat - Punjab - Delhi -Jammu & Kashmir')">Enquire Now</button>
          </div>

        </div> <!-- end track -->

        <div class="carousel-dots" id="carouselDots" aria-hidden="false"></div>
      </div> <!-- end carousel -->

    </div> <!-- end packages card -->
<div class="card contact-modern">
  <h2 class="title"><i class="fa-solid fa-phone"></i> Contact</h2>

  <!-- Floating Quick Icons -->
  <div class="contact-floating-icons">
    <a href="tel:+916282332791" class="c-icon"><i class="fa-solid fa-phone"></i></a>
    <a href="tel:+919745298377" class="c-icon"><i class="fa-solid fa-phone"></i></a>
    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=dreamtravellers.ta@gmail.com" target="_blank" class="c-icon"><i class="fa-solid fa-envelope"></i></a>
    {% comment %} <a href="https://dreamtravellers.onrender.com" target="_blank" class="c-icon">
     <i class="fa-solid fa-globe"></i>
     </a> {% endcomment %}
     {% comment %} <a href="https://wa.me/919745298377" target="_blank" class="c-icon"> 
    <i class="fa-brands fa-whatsapp"></i> 
     </a> {% endcomment %}
  </div>

  <!-- Premium Glass QR -->
  <div class="enhanced-qr-square">
    <div class="qr-glass-square"></div>
    <img src="{% static 'images/contact-qr.png' %}" alt="WhatsApp QR">
  </div> 

  {% comment %} <!-- Contact Info -->
  <div class="contact-mini">
    <div><i class="fa-solid fa-phone"></i> +91 9745298377</div>
    <div><i class="fa-solid fa-envelope"></i> dreamtravellers.ta@gmail.com</div>
    <div><i class="fa-solid fa-globe"></i> dreamtravellers.onrender.com</div>
  </div> {% endcomment %}

  <!-- Locations -->
   <div class="location-heading">Operating Locations</div>
  <div class="location-pills">
    <span>Kannur</span>
    <span>Surat</span>
    <span>Coimbatore</span>
    <span>Pune</span>
  </div>

  <!-- Premium WA Button -->
  <a class="enhanced-wa" href="https://wa.me/919745298377" target="_blank">
    <i class="fa-brands fa-whatsapp"></i> Chat on WhatsApp
  </a>
</div>



  <!-- Chatbot Button -->
  <div id="web-chatbot-toggle" title="Open chat">üí¨</div>

  <!-- Chatbot Window -->
  <div id="web-chatbot" role="dialog" aria-label="Travel Assistant chatbot">
    <div id="web-chatbot-header">
      <div>Travel Assistant</div>
      <div id="web-chatbot-close" style="cursor:pointer">‚úñ</div>
    </div>

    <div id="web-chatbot-messages"></div>
    <div id="typing-indicator">Travel Assistant is typing...</div>

    <div id="chat-input-area">
      <input id="chat-step-input" placeholder="Type your message or select options below">
      <button id="chat-step-send">Send</button>
    </div>
  </div>

  <!-- ================= PART 3: FULL ENQUIRY FORM (Travel Theme D) ================= -->
  <div id="enquiryModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="enquiryTitle">
    <div class="modal-box" role="document" aria-describedby="enquiry-desc">
      <div class="modal-left">
        <div class="modal-header" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <h2 id="enquiryTitle" style="margin:0">Travel Enquiry Form</h2>
          <button aria-label="Close" onclick="closeEnquiry()" style="background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer">‚úñ</button>
        </div>

        <div id="enquiry-desc" style="font-size:13px;color:var(--muted);margin-bottom:12px">"Please share us your requirement, we will curate your travel plan accordingly"</div>

        <form id="travelFormHtml" onsubmit="return false;">
          {% csrf_token %}

          <!-- Traveler Details -->
          <div class="form-section">
            <h3>Traveler Details</h3>

            <div class="field-row">
              <div class="field">
                <i class="fa-solid fa-user"></i>
                <input id="name" name="name" type="text" placeholder="Full name *" required>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <i class="fa-solid fa-phone"></i>
                <input id="phone" name="phone" type="tel" placeholder="Mobile number *" required maxlength="10" pattern="[0-9]{10}">
              </div>
              <div class="field">
                <i class="fa-solid fa-envelope"></i>
                <input id="email" name="email" type="email" placeholder="Email (optional)">
              </div>
            </div>
          </div>

          <!-- Trip Details -->
          <div class="form-section">
            <h3>Trip Details</h3>

            <div class="field-row">
              <div class="field" style="flex:1 1 60%">
                <i class="fa-solid fa-map-location-dot"></i>
                <input id="plannedDestination" name="planned_destination" type="text" placeholder="Planned destination *" required >
              </div>
              <div class="field" style="flex:1 1 40%">
                <i class="fa-solid fa-location-arrow"></i>
                <input id="startingLocation" name="starting_location" type="text" placeholder="Starting location *" required>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <i class="fa-solid fa-calendar-days"></i>
                <input id="travelDate" name="travel_date" type="date" placeholder="Travel date *" required>
              </div>
              <div class="field">
                <i class="fa-solid fa-people-group"></i>
                <select id="travelGroup" name="travel_group" required style="background:transparent;border:none">
                  <option value="">Travel group *</option>
                  <option>Family</option>
                  <option>Friends</option>
                  <option>Bachelors</option>
                  <option>Honeymoon</option>
                  <option>Corporate</option>
                  <option>Other</option>
                </select>
              </div>
            </div>

            <div class="field-row">
              <div class="field">
                <i class="fa-solid fa-moon"></i>
                <input id="Calcnights" name="nights" type="number" placeholder="No Of Nights *" required min="1">
              </div>
              <div class="field">
                <i class="fa-solid fa-user-check"></i>
                <input id="Calcadults" name="adults" type="text" placeholder="Adults(Age: 10+ years) *" required>
              </div>
              <div class="field">
                <i class="fa-solid fa-child"></i>
                <input id="Calcchildren" name="children" type="text" placeholder="Children(Age: 6-10 years)">
              </div>
            </div>
          </div>

          <!-- Preferences & Notes -->
          <div class="form-section">
            <h3>Preferences / Notes</h3>

            <div class="field-row">
              <div class="field" style="flex:1">
                <i class="fa-solid fa-hotel"></i>
                <select id="hotelCategory" name="hotel_category" required style="background:transparent;border:none">
                  <option value="">Hotel category *</option>
                  <option>Budget/2 Star</option>
                  <option>3 Star</option>
                  <option>4 Star</option>
                  <option>5 Star</option>
                </select>
              </div>

              <div class="field" style="flex:1">
                <i class="fa-solid fa-car-side"></i>
                <select id="transportation" name="transportation" required style="background:transparent;border:none">
                  <option value="">Transportation *</option>
                  <option>Own</option>
                  <option>Required</option>
                  <option>Pick Up & Drop Only</option>
                </select>
              </div>
            </div>

            <div class="field-row">
              <div class="field" style="width:100%">
                <i class="fa-solid fa-pen"></i>
                <textarea id="extraRequirement" name="extra_requirement" rows="3" placeholder="Any specific requirement (optional)"></textarea>
              </div>
            </div>

            <div class="modal-actions" style="margin-top:6px">
              <button id="submitEnquiryBtn" class="btn-primary" type="button">Submit Enquiry</button>
              <button type="button" class="btn-secondary" onclick="closeEnquiry()">Cancel</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="footer-content">
      <h2>Dream Travellers</h2>
      <div class="reviews-box">
        <h3>What Our Travellers Say</h3>
        <div class="reviews-slider" id="reviewsSlider">
          <div class="review-card">
            <p class="review-text">"Dream travellers made my dream come true. They planned a perfect offbeat Kerala experience‚Ä¶"</p>
            <div class="review-author">‚Äî Mohd Salman Khan ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          </div>
          <div class="review-card">
            <p class="review-text">"Our workcation trip to Chandigarh‚ÄìManali was smooth and hassle-free. Excellent support and planning‚Ä¶"</p>
            <div class="review-author">‚Äî Fasna CS ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          </div>
          <div class="review-card">
            <p class="review-text">"Completed a Manali workation with Dream Travellers. Clean hotels, reliable drivers and flexible schedules..."</p>
            <div class="review-author">‚Äî Happy Traveller ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          </div>
        </div>
      </div>

      <div class="footer-social">
        {% comment %} <a href="https://facebook.com/YOUR_PAGE" target="_blank" aria-label="Facebook"><i class="fa-brands fa-facebook"></i></a> {% endcomment %}
        <a href="https://instagram.com/dreamtravellers_ta" target="_blank" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
        <a href="https://wa.me/919745298377" target="_blank" aria-label="WhatsApp"><i class="fa-brands fa-whatsapp"></i></a>
        <a href="https://maps.app.goo.gl/X29RLb1d9UgZv2hS7?g_st=aw" 
         target="_blank" 
        class="footer-icon">
       <i class="fa-solid fa-map-location-dot"></i>
</a>

      </div>

      <p class="footer-copy">¬© 2025 Dream Travellers ‚Ä¢ All Rights Reserved</p>
    </div>
  </footer>
{% comment %} <!-- Premium Budget Calculator ‚Äî drop this block near the end of your <body> (after enquiry modal) -->
<!-- This is a self-contained premium calculator: HTML + CSS + JS. IDs prefixed with dt- to avoid clashes. -->
<div id="dt-budgetModal" class="dt-budget-overlay" aria-hidden="true" role="dialog" aria-labelledby="dt-budgetTitle">
  <div class="dt-budget-box">
    <header class="dt-budget-header">
      <h2 id="dt-budgetTitle">‚ú®Travel Budget Planner</h2>
      <button id="dt-closeBudget" class="dt-close" aria-label="Close calculator">‚úñ</button>
    </header>
    <div class="dt-budget-scroll-area">
    <main class="dt-budget-main">
      <section class="dt-left">
        <label class="dt-row"><span>Adults</span>
          <input id="dt-budgetAdults" type="number" value="2" min="1" />
        </label>

        <label class="dt-row"><span>Children</span>
          <input id="dt-budgetChildren" type="number" value="0" min="0" />
        </label>

        <label class="dt-row"><span>Nights</span>
          <input id="dt-budgetNights" type="number" value="3" min="1" />
        </label>

        <label class="dt-row"><span>Hotel Category (per person / night)</span>
          <select id="dt-budgetHotelType">
            <option value="1800">Budget ‚Äî ‚Çπ1,800 pp/night</option>
            <option value="2500">Mid ‚Äî ‚Çπ2,500 pp/night</option>
            <option value="3800">Premium ‚Äî ‚Çπ3,800 pp/night</option>
          </select>
        </label>

        <label class="dt-row"><span>Food (per person / day)</span>
          <input id="dt-budgetFood" type="number" value="400" min="0" />
        </label>

        <label class="dt-row"><span>Transport (per day)</span>
          <select id="dt-budgetTransport">
            <option value="800">Sedan ‚Äî ‚Çπ800 / day</option>
            <option value="1000">SUV ‚Äî ‚Çπ1,000 / day</option>
            <option value="1500">Traveller ‚Äî ‚Çπ1,500 / day</option>
          </select>
        </label>

        <label class="dt-row"><span>Activities / Extras (total)</span>
          <input id="dt-budgetActivities" type="number" value="2000" min="0" />
        </label>

        <div class="dt-actions">
          <button id="dt-calcBtn" class="dt-btn dt-btn-primary">Calculate estimate</button>
          <button id="dt-applyBtn" class="dt-btn dt-btn-secondary">Apply to enquiry</button>
        </div>
      </section>

      <aside class="dt-right">
        <h3>Estimate</h3>
        <div class="dt-line"><span>Hotel</span><span id="dt-outHotel">‚Çπ0</span></div>
        <div class="dt-line"><span>Food</span><span id="dt-outFood">‚Çπ0</span></div>
        <div class="dt-line"><span>Transport</span><span id="dt-outTransport">‚Çπ0</span></div>
        <div class="dt-line"><span>Activities</span><span id="dt-outActivities">‚Çπ0</span></div>
        <hr />
        <div class="dt-total"><span>Total</span><span id="dt-outTotal">‚Çπ0</span></div>
        <div class="dt-sub"><span>Per person</span><span id="dt-outPer">‚Çπ0</span></div>

        <small class="dt-note">Tip: "Apply to enquiry" will prefill the enquiry modal's adults, children and nights fields.</small>
      </aside>
    </main>
  </div>
  </div>
</div>

<!-- Floating trigger button -->
<button id="dt-floatingBudgetBtn" class="dt-floating-btn" aria-controls="dt-budgetModal" aria-expanded="false" title="Open budget planner">üí∞</button> {% endcomment %}

<style>
{% comment %} /* Scoped premium styles (prefix dt- ) */
.dt-budget-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(2,6,23,0.6), rgba(2,6,23,0.6));backdrop-filter:blur(8px);z-index:7000}
.dt-budget-box{width:92%;max-width:980px;border-radius:18px;background:linear-gradient(180deg, rgba(8,12,20,0.95), rgba(6,10,18,0.98));border:1px solid rgba(255,255,255,0.06);box-shadow:0 10px 40px rgba(0,0,0,0.6);overflow:hidden;color:#fff;font-family:inherit}
.dt-budget-header{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid rgba(255,255,255,0.03)}
.dt-budget-header h2{margin:0;font-size:20px;background:linear-gradient(90deg,#00eaff,#00ffbf);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.dt-close{background:transparent;border:none;color:#fff;font-size:20px;cursor:pointer}
.dt-budget-main{display:flex;gap:20px;padding:18px}
.dt-left{flex:1;display:flex;flex-direction:column;gap:12px;padding-right:6px}
.dt-right{width:320px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.dt-row{display:flex;flex-direction:column;gap:6px;font-size:14px}
.dt-row span{font-weight:600;color:rgba(255,255,255,0.85)}
.dt-row input, .dt-row select{padding:10px;border-radius:10px;border:none;background:rgba(255,255,255,0.95);color:#000;font-size:14px}
.dt-actions{display:flex;gap:10px;margin-top:6px}
.dt-btn{flex:1;padding:12px;border-radius:12px;border:none;cursor:pointer;font-weight:700}
.dt-btn-primary{background:linear-gradient(135deg,#00eaff,#00ffbf);color:#003}
.dt-btn-secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff}
.dt-line{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:600}
.dt-total{display:flex;justify-content:space-between;margin-top:10px;font-size:18px;font-weight:900}
.dt-sub{display:flex;justify-content:space-between;margin-top:6px;opacity:0.9}
.dt-note{display:block;margin-top:10px;color:rgba(255,255,255,0.7);font-size:12px}

/* Floating button */
.dt-floating-btn{position:fixed;right:22px;bottom:95px;width:62px;height:62px;border-radius:50%;background:linear-gradient(135deg,#ffb300,#ff7a00);border:none;font-size:26px;z-index:7100;box-shadow:0 10px 30px rgba(0,0,0,0.45);cursor:pointer}
.dt-floating-btn:focus{outline:3px solid rgba(255,255,255,0.12)}

/* Responsive */
@media (max-width:880px){.dt-budget-main{flex-direction:column}.dt-right{width:100%}} {% endcomment %}
</style>

<script>
{% comment %} (function(){
  // helpers
  const qs = id => document.getElementById(id);
  const money = n => '‚Çπ' + Number(n).toLocaleString('en-IN');

  const modal = qs('dt-budgetModal');
  const openBtn = qs('dt-floatingBudgetBtn');
  const closeBtn = qs('dt-closeBudget');
  const calcBtn = qs('dt-calcBtn');
  const applyBtn = qs('dt-applyBtn');

  // inputs
  const adultsIn = qs('dt-budgetAdults');
  const childrenIn = qs('dt-budgetChildren');
  const nightsIn = qs('dt-budgetNights');
  const hotelIn = qs('dt-budgetHotelType');
  const foodIn = qs('dt-budgetFood');
  const transportIn = qs('dt-budgetTransport');
  const activitiesIn = qs('dt-budgetActivities');

  // outputs
  const outHotel = qs('dt-outHotel');
  const outFood = qs('dt-outFood');
  const outTransport = qs('dt-outTransport');
  const outActivities = qs('dt-outActivities');
  const outTotal = qs('dt-outTotal');
  const outPer = qs('dt-outPer');

  function openBudget(){ modal.style.display = 'flex'; modal.setAttribute('aria-hidden','false'); openBtn.setAttribute('aria-expanded','true'); }
  function closeBudget(){ modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); openBtn.setAttribute('aria-expanded','false'); }

  function calculateBudget(){
    const adults = Math.max(1, Number(adultsIn.value) || 0);
    const children = Math.max(0, Number(childrenIn.value) || 0);
    const nights = Math.max(1, Number(nightsIn.value) || 1);
    const hotelRate = Number(hotelIn.value) || 0; // per person per night
    const foodRate = Number(foodIn.value) || 0; // per person per day
    const transportRate = Number(transportIn.value) || 0; // per day (group)
    const activities = Number(activitiesIn.value) || 0; // flat total

    // hotel: hotelRate * (adults + childrenFactor) * nights
    // treat children as 0.6 of adult cost (common approximation)
    const childFactor = 0.6;
    const paxEquivalent = adults + children * childFactor;
    const hotelCost = hotelRate * paxEquivalent * nights;

    // food: foodRate * (adults + children) * nights
    const foodCost = foodRate * (adults + children) * nights;

    // transport: transportRate * nights
    const transportCost = transportRate * nights;

    const activitiesCost = activities;

    const total = hotelCost + foodCost + transportCost + activitiesCost;
    const perPerson = total / (adults + children || 1);

    // write outputs
    outHotel.textContent = money(Math.round(hotelCost));
    outFood.textContent = money(Math.round(foodCost));
    outTransport.textContent = money(Math.round(transportCost));
    outActivities.textContent = money(Math.round(activitiesCost));
    outTotal.textContent = money(Math.round(total));
    outPer.textContent = money(Math.round(perPerson));

    return { adults, children, nights, total };
  }

  // apply calculated values to enquiry modal (if present)
  function applyToEnquiry(){
    // calculate first
    const res = calculateBudget();
    try{
      // safe-guard: try several possible IDs (your page has different IDs in different versions)
      const possibleNights = [ 'Calcnights', 'nights', 'dt-nights' ];
      const possibleAdults = [ 'Calcadults', 'adults', 'dt-adults' ];
      const possibleChildren = [ 'Calcchildren', 'children', 'dt-children' ];

      let setOne = false;
      // nights
      for(const id of possibleNights){ const el = document.getElementById(id); if(el){ el.value = res.nights; setOne = true; break; } }
      for(const id of possibleAdults){ const el = document.getElementById(id); if(el){ el.value = res.adults; setOne = true; break; } }
      for(const id of possibleChildren){ const el = document.getElementById(id); if(el){ el.value = res.children; setOne = true; break; } }

      // open enquiry modal if available
      const enquiry = document.getElementById('enquiryModal') || document.getElementById('dt-enquiryModal');
      if(enquiry) enquiry.style.display = 'flex';

      if(!setOne){ alert('Applied values, but could not find enquiry fields on this page. They may use different input IDs.'); }
    }catch(e){ console.warn('applyToEnquiry failed', e); }
  }

  // events
  openBtn && openBtn.addEventListener('click', ()=> openBudget());
  closeBtn && closeBtn.addEventListener('click', ()=> closeBudget());
  calcBtn && calcBtn.addEventListener('click', ()=> calculateBudget());
  applyBtn && applyBtn.addEventListener('click', ()=> applyToEnquiry());

  // keyboard: esc to close
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && modal.style.display === 'flex') closeBudget(); });

  // init: auto-calc with defaults on first open
  openBtn && openBtn.addEventListener('mouseenter', ()=>{/* small affordance, no-op */});

  // expose to window for debugging
  window.dtBudget = { openBudget, closeBudget, calculateBudget, applyToEnquiry };
})(); {% endcomment %}
</script>
<!-- End premium calculator -->




  <!-- ================= SUBMIT SCRIPT (CSRF aware) & helpers ================= -->
  <script>
  // small utils
  function getCookie(name) {
    const v = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
    return v ? v.pop() : '';
  }
  const CSRFTOKEN = getCookie('csrftoken');

  // carousel helpers (kept from your code)
  const track = document.querySelector(".carousel-track");
  const slides = () => document.querySelectorAll(".slide");
  const dotsContainer = document.getElementById("carouselDots");
  let carouselIndex = 0;
  let carouselTimer = null;

  function buildDots(){
    if(!dotsContainer) return;
    dotsContainer.innerHTML = '';
    const s = slides();
    s.forEach((_,i)=>{
      const dot = document.createElement('span');
      dot.addEventListener('click', ()=>{ goToSlide(i); resetCarouselTimer(); });
      if(i===0) dot.classList.add('active');
      dotsContainer.appendChild(dot);
    });
  }
  function updateDots(){
    if(!dotsContainer) return;
    const dots = dotsContainer.children;
    for(let i=0;i<dots.length;i++){
      dots[i].classList.toggle('active', i===carouselIndex);
    }
  }
  function goToSlide(i){
    const total = slides().length;
    carouselIndex = (i + total) % total;
    if(track){
      const targetSlide = slides()[carouselIndex];
      if(targetSlide){
        track.scrollTo({ left: targetSlide.offsetLeft, behavior: 'smooth' });
      }
    }
    updateDots();
  }
  function nextSlide(){ goToSlide(carouselIndex + 1); }
  function resetCarouselTimer(){ if(carouselTimer) clearInterval(carouselTimer); carouselTimer = setInterval(nextSlide, 3500); }

  if(track){
    let scrollTimeout = null;
    track.addEventListener('scroll', () => {
      if (scrollTimeout) clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(() => {
        const slidesArr = Array.from(slides());
        const centerX = track.scrollLeft + (track.clientWidth / 2);
        let bestIndex = 0, bestDist = Infinity;
        slidesArr.forEach((s, idx) => {
          const slideCenter = s.offsetLeft + (s.offsetWidth/2);
          const dist = Math.abs(slideCenter - centerX);
          if (dist < bestDist) { bestDist = dist; bestIndex = idx; }
        });
        carouselIndex = bestIndex;
        updateDots();
      }, 80);
    });
  }

  // WhatsApp opener
  function openWhatsApp(packageName){
    const phone = "919745298377";
    const msg = `Hello, I am interested in the ${packageName} package. Please share more details.`;
    window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`, "_blank");
  }
  function openWhatsAppFromSummary(){
    const pkg = document.getElementById("selectedPackage").value || "Package enquiry";
    openWhatsApp(pkg);
  }

  // Chatbot & formValues
  const API_BASE = window.location.origin; // use same host by default
 const formValues = {
    name: "",
    phone: "",
    email: "",
    planned_destination: "",   // ‚úÖ ADD THIS
    starting_location: "",
    travel_date: "",
    travel_group: "",
    nights: "",
    adults: "",
    children: "",
    hotel_category: "",
    transportation: "",
    extra_requirement: ""
};
const idMap = {
    name: "name",
    phone: "phone",
    email: "email",

    planned_destination: "plannedDestination",
    starting_location: "startingLocation",
    travel_date: "travelDate",
    travel_group: "travelGroup",
    nights: "Calcnights",
    adults: "Calcadults",
    children: "Calcchildren",

    hotel_category: "hotelCategory",
    transportation: "transportation",
    extra_requirement: "extraRequirement",

};


  const chatWin = document.getElementById("web-chatbot");
  const toggleBtn = document.getElementById("web-chatbot-toggle");
  const closeBtn = document.getElementById("web-chatbot-close");
  const messages = document.getElementById("web-chatbot-messages");
  const typingIndicator = document.getElementById("typing-indicator");
  const input = document.getElementById("chat-step-input");
  const sendBtn = document.getElementById("chat-step-send");

  toggleBtn.onclick = ()=>{ if(chatWin) chatWin.style.display='flex'; input.focus(); };
  closeBtn.onclick = ()=> chatWin.style.display='none';

  function escapeHtml(s){ return String(s||'').replaceAll('&','&amp;').replaceAll('<','&lt;'); }
  function scrollToBottom(el){ if(!el) return; el.scrollTop = el.scrollHeight; }

  function appendUser(text){
    const d=document.createElement('div');
    d.className='msg you';
    d.innerHTML=`<div class="bubble">${escapeHtml(text)}</div>`;
    messages.appendChild(d);
    scrollToBottom(messages);
  }
  function appendBotBubbleEmpty(){
    const d=document.createElement('div');
    d.className='msg bot';
    d.innerHTML=`<div class="bubble"></div>`;
    messages.appendChild(d);
    scrollToBottom(messages);
    return d.querySelector('.bubble');
  }
  function typeIntoBubble(bubble, text, speed=12){
    let i=0;
    return new Promise(resolve=>{
      function tick(){
        bubble.textContent = text.slice(0,i++);
        scrollToBottom(messages);
        if(i<=text.length) setTimeout(tick,speed);
        else resolve();
      }
      tick();
    });
  }
  function showTyping(on=true){ if(typingIndicator) typingIndicator.style.display = on ? 'block' : 'none'; scrollToBottom(messages); }

  // Location options from slides (package titles)
  let LOCATION_OPTIONS = [];
  function populateLocationOptionsFromSlides(){
    LOCATION_OPTIONS = Array.from(document.querySelectorAll(".slide h3")).map(h => h.textContent.trim()).filter(Boolean);
  }

  // show multiple option buttons
  function showOptions(question, key, options = [], mapTo){
    const bubble = appendBotBubbleEmpty();
    bubble.innerHTML = question;

    const wrap = document.createElement("div");
    wrap.className = "msg bot";
    const bubble2 = document.createElement("div");
    bubble2.className = "bubble";

    const btnContainer = document.createElement("div");
    btnContainer.style.display = "flex";
    btnContainer.style.flexWrap = "wrap";
    btnContainer.style.gap = "8px";
    btnContainer.style.marginTop = "10px";

    options.forEach(opt => {
      const btn = document.createElement("button");
      btn.textContent = opt;
      btn.className = "action-btn";
      btn.style.minWidth = "80px";
      btn.onclick = () => {
        // mapTo tells which backend/modal field to set
       if (mapTo) {
    let storedValue = opt;

    if (mapTo === "adults" && opt === ">7") storedValue = ">7";
    if (mapTo === "children" && opt === ">4") storedValue = ">4";

    formValues[mapTo] = storedValue;

    appendUser(opt);

    const el = document.getElementById(idMap[mapTo] || mapTo);
    if (el) el.value = opt;
}

        wrap.remove();
        handleMissingFields();
      };
      btnContainer.appendChild(btn);
    });

    bubble2.appendChild(btnContainer);
    wrap.appendChild(bubble2);
    messages.appendChild(wrap);
    scrollToBottom(messages);
  }

  async function handleMissingFields(){
    const required = [
      {chatKey:"name", label:"Please tell me your name.", mapTo:"name"},
      {chatKey:"phone", label:"Please enter your 10-digit mobile number.", mapTo:"phone", inputType:"phone"},
      {chatKey:"location", label:"Please enter your destination", mapTo:"planned_destination"},
      {chatKey:"nights", label:"How many nights?", mapTo:"nights", type:"options", options:["1","2","3","4","5","6","7","8","9","10"]},
      {chatKey:"adults", label:"How many adults?", mapTo:"adults", type:"options", options:["1","2","3","4","5","6","7",">7"]},
      {chatKey:"children", label:"How many children?", mapTo:"children", type:"options", options:["0","1","2","3","4",">4"]},
      {chatKey:"date", label:"What is your travel date?", mapTo:"travel_date", inputType:"date"},
      {chatKey:"hotel", label:"Preferred hotel category?", mapTo:"hotel_category", type:"options", options:["Budget/2 Star","3 Star","4 Star","5 Star"]},
      {chatKey:"travelWith", label:"Who are you travelling with?", mapTo:"travel_group", type:"options", options:["Family","Friends","Bachelors","Honeymoon","Corporate","Other"]}
    ];

    const missing = required.find(r => {
      const val = formValues[r.mapTo];
      return !val || String(val).trim() === "";
    });

    if(!missing){
      showSummary();
      return;
    }

    const ask = missing;

    if(ask.type === "options" && Array.isArray(ask.options) && ask.options.length){
      return showOptions(ask.label, ask.chatKey, ask.options, ask.mapTo);
    }

    const bubble = appendBotBubbleEmpty();
    await typeIntoBubble(bubble, ask.label);

    const wrap = document.createElement("div");
    wrap.className="msg bot";
    const bubble2 = document.createElement("div");
    bubble2.className="bubble";
    const formNode = document.createElement("div");
    formNode.className="inline-form";

    let field;
    if(ask.inputType === "phone"){
      field = document.createElement("input"); field.type="tel"; field.placeholder="Enter 10-digit mobile number"; field.maxLength = 10;
    } else if(ask.inputType === "date"){
      field = document.createElement("input"); field.type="date";
    } else {
      field = document.createElement("input"); field.type="text"; field.placeholder = ask.label;
    }

    formNode.appendChild(field);

    const btnRow = document.createElement("div");
    btnRow.style.marginTop="8px"; btnRow.style.display="flex"; btnRow.style.gap="8px";

    const ok = document.createElement("button"); ok.className="action-btn"; ok.textContent="OK";
    
    btnRow.appendChild(ok); 
    formNode.appendChild(btnRow);
    bubble2.appendChild(formNode);
    wrap.appendChild(bubble2);
    messages.appendChild(wrap);
    scrollToBottom(messages);

    ok.onclick = ()=>{ 
      const val = (field.value || "").trim();
      if(ask.inputType === "phone" && val && !/^\d{10}$/.test(val)){ alert("Please enter a valid 10-digit mobile number."); return; }
      if((ask.chatKey === "name" || ask.chatKey === "phone" || ask.chatKey === "location") && !val){ alert("This field is required."); return; }

      formValues[ask.mapTo] = val;
      // set modal input if available
    
      const el = document.getElementById(idMap[ask.mapTo] || ask.mapTo);
      if(el) el.value = val;
      appendUser(val || "(skipped)");
      wrap.remove();
      handleMissingFields();
    };
  }

  function showSummary(){
    const lines = [
      `Name: ${formValues.name || "Not provided"}`,
      `Phone: ${formValues.phone || "Not provided"}`,
      `Planned Destination: ${formValues.planned_destination || "Not provided"}`,
      `Nights: ${formValues.nights || "Not provided"}`,
      `Persons: ${formValues.adults || "N/A"} adults, ${formValues.children || "N/A"} children`,
      `Date: ${formValues.travel_date || "Not specified"}`,
      `Hotel: ${formValues.hotel_category || "Not specified"}`,
      `Travel Group: ${formValues.travel_group || "Not specified"}`
    ];
 const html = `
  <b>Preview your enquiry</b><br><br>
  ${lines.join("<br>")}<br><br>

<div class="preview-buttons">
    <button class="action-btn" id="submit-chat-enquiry" style="background:#00ffbf;color:#003;">Submit Enquiry</button>
</div>

`;
async function submitChatbotEnquiry() {
    try {
        
          const res = await fetch(API_BASE + "/api/save-enquiry/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": CSRFTOKEN
            },
            body: JSON.stringify(formValues)
        });

        const data = await res.json().catch(() => ({status:"error"}));

        if(res.ok && data.status === "ok"){
            sendToWhatsApp(formValues); // also send to WhatsApp
            showSuccessPopup();
            closeEnquiry();
            const successBubble = appendBotBubbleEmpty();
            await typeIntoBubble(successBubble, "üéâ Your enquiry has been submitted successfully!\nOur team will contact you shortly.");
            
            // Reset chatbot for next enquiry
            Object.keys(formValues).forEach(k => formValues[k] = "");

            return;
        } else {
            alert("Error saving enquiry: " + (data.message || "Unknown error"));
        }
    } catch(err){
        alert("Network error: " + err.message);
    }
}


    const wrap = document.createElement("div");
    wrap.className="msg bot";
    wrap.innerHTML = `<div class="bubble">${html}</div>`;
    messages.appendChild(wrap);
    scrollToBottom(messages);
    setTimeout(()=>{
      const openBtn = document.getElementById("open-modal-from-chat");
      if(openBtn){
        openBtn.onclick = ()=>{
          // prefill modal fields from formValues
          Object.keys(formValues).forEach(k=>{
           
            const el = document.getElementById(idMap[k] || k);
            if(el) el.value = formValues[k] || "";
          });
          
        };
      }
       const submitBtn = document.getElementById("submit-chat-enquiry");
if(submitBtn){
    submitBtn.onclick = submitChatbotEnquiry;
}

    }, 100);
  }
async function sendToWhatsApp(formValues) {
    const BUSINESS_NUMBER = "919745298377";

    const msg = `
New Enquiry:
Name: ${formValues.name}
Phone: ${formValues.phone}
Destination: ${formValues.planned_destination}
Nights: ${formValues.nights}
Adults: ${formValues.adults}, Children: ${formValues.children}
Date: ${formValues.travel_date}
Hotel: ${formValues.hotel_category}
Travel Group: ${formValues.travel_group}
Notes: ${formValues.extra_requirement}
`.trim();

    window.open(
        `https://wa.me/${BUSINESS_NUMBER}?text=${encodeURIComponent(msg)}`,
        "_blank"
    );
}


  // Boot / init
  function startApp(){
    populateLocationOptionsFromSlides();
    buildDots();
    goToSlide(0);
    resetCarouselTimer();
    window.addEventListener('resize', ()=>{ goToSlide(carouselIndex); });
    sendBtn.onclick = handleSend;
    input.addEventListener('keydown', (e)=>{ if(e.key === "Enter") handleSend(); });

    setTimeout(()=> {
      const b = appendBotBubbleEmpty();
      typeIntoBubble(b, "Hello üëã I'm your travel assistant. Tell me your name or use the option buttons!") .then(()=> handleMissingFields());
    }, 600);
  }

  async function handleSend(){
    const text = input.value.trim();
    if(!text) return;
    appendUser(text);
    input.value = '';
    showTyping(true);

    // local matching for locations/packages
    const matched = LOCATION_OPTIONS.find(opt => opt.toLowerCase().includes(text.toLowerCase()));
    if(matched){
      const b = appendBotBubbleEmpty();
      await typeIntoBubble(b, `I found "${matched}". Want to enquire?`);
      const wrap = document.createElement("div"); wrap.className="msg bot";
      const bubble2 = document.createElement("div"); bubble2.className="bubble";
      const btn = document.createElement("button"); btn.className="action-btn"; btn.textContent="Enquire";
      btn.onclick = ()=> {
        // set selected_package and open modal
        formValues.selected_package = matched;
        const pkgEl = document.getElementById("selectedPackage"); if(pkgEl) pkgEl.value = matched;
        openEnquiry(matched);
      };
      bubble2.appendChild(btn); wrap.appendChild(bubble2); messages.appendChild(wrap); scrollToBottom(messages);
    } else {
      // if user typed a name and name not set, set it
      if(!formValues.name) formValues.name = text;
      handleMissingFields();
    }
    showTyping(false);
  }

  // single robust openEnquiry/closeEnquiry
  function openEnquiry(packageName){
    const modal = document.getElementById("enquiryModal");
    if(modal) modal.style.display = "flex";
    // prefill form from formValues
    try{
      Object.keys(formValues).forEach(k=>{


        const el = document.getElementById(idMap[k] || k);
        if(el) el.value = formValues[k] || "";
      });
    }catch(e){ console.warn(e); }
    refreshSummaryFromForm();
  }
  function closeEnquiry(){
    const modal = document.getElementById("enquiryModal");
    if(modal) modal.style.display = "none";
  }

  // click outside to close
  document.getElementById("enquiryModal").addEventListener("click", function(e){
    if(e.target === this) closeEnquiry();
  });

  // summary helpers
  function updateSummaryField(id, value){
    const el = document.getElementById(id);
    if(el) el.textContent = value || "‚Äî";
  }
  function refreshSummaryFromForm(){
    updateSummaryField("summaryStart", document.getElementById("startingLocation").value);
    updateSummaryField("summaryDate", document.getElementById("travelDate").value);
    updateSummaryField("summaryNights", document.getElementById("Calcnights").value);
    updateSummaryField("summaryAdults", document.getElementById("Calcadults").value);
    updateSummaryField("summaryChildren", document.getElementById("Calcchildren").value);
    updateSummaryField("summaryHotel", document.getElementById("hotelCategory").value);
    updateSummaryField("summaryTransport", document.getElementById("transportation").value);
    updateSummaryField("summaryNotes", document.getElementById("extraRequirement").value);
  }

  // live update summary as user edits in modal
  ["selectedPackage","startingLocation","travelDate","Calcnights","Calcadults","Calcchildren","hotelCategory","transportation","extraRequirement"].forEach(id=>{
    const el = document.getElementById(id);
    if(el){
      el.addEventListener("input", refreshSummaryFromForm);
      el.addEventListener("change", refreshSummaryFromForm);
    }
  });

  // Submit handler for modal form
  document.getElementById("submitEnquiryBtn").addEventListener("click", async function () {
    const btn = this;
    btn.disabled = true;
    btn.textContent = "Sending...";

    // --- FIX CHILDREN AND ADULTS WHEN CHATBOT SETS VALUES LIKE ">4" OR ">7" ---
let childrenValue = document.getElementById("Calcchildren").value.trim();
let adultsValue = document.getElementById("Calcadults").value.trim();



    const payload = {
      name: document.getElementById("name").value.trim(),
      phone: document.getElementById("phone").value.trim(),
      email: document.getElementById("email").value.trim(),

      planned_destination: document.getElementById("plannedDestination").value.trim(),
      starting_location: document.getElementById("startingLocation").value.trim(),
      travel_date: document.getElementById("travelDate").value || null,
      travel_group: document.getElementById("travelGroup").value,
      nights: document.getElementById("Calcnights").value,
      adults: adultsValue,          // ‚Üê FIX APPLIED HERE
      children: childrenValue,
      hotel_category: document.getElementById("hotelCategory").value,
      transportation: document.getElementById("transportation").value,
      extra_requirement: document.getElementById("extraRequirement").value.trim()
    };

    // Basic validation
    if(!payload.name || !/^\d{10}$/.test(payload.phone) || !payload.starting_location || !payload.travel_date){
      alert("Please fill required fields correctly (name, 10-digit phone, starting location, travel date).");
      btn.disabled = false;
      btn.textContent = "Submit Enquiry";
      return;
    }

    try{
           const res = await fetch(API_BASE + "/api/save-enquiry/", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "X-CSRFToken": CSRFTOKEN
  },
  credentials: "same-origin",  // <<< ADD THIS TOO
  body: JSON.stringify(payload)
});

      const data = await res.json().catch(()=>({status:"error", message:"Invalid JSON response"}));
      if(res.ok && data.status === "ok"){
        showSuccessPopup(); 
        closeEnquiry();
        document.getElementById("travelFormHtml").reset();
        refreshSummaryFromForm();
      } else {
        alert("Error saving enquiry: " + (data.message || data.detail || "server error"));
      }
    } catch(err){
      console.error(err);
      alert("Network error: " + err.message);
    } finally {
      btn.disabled = false;
      btn.textContent = "Submit Enquiry";
    }
  });

  // expose debug functions (optional)
  window._dt = { goToSlide, resetCarouselTimer, openWhatsApp, populateLocationOptionsFromSlides };

  document.addEventListener("DOMContentLoaded", ()=>{ startApp(); refreshSummaryFromForm(); });

// ===================== AUTO SLIDE FOR REVIEWS ===================== //
/* ===================== FIXED REVIEW AUTO SLIDER ===================== */
/* ===================== FIXED REVIEW AUTO-SLIDER ===================== */
document.addEventListener("DOMContentLoaded", () => {
    const slider = document.getElementById("reviewsSlider");
    if (!slider) return;

    let cards = Array.from(slider.querySelectorAll(".review-card"));
    if (cards.length <= 1) return;

    /* Duplicate cards to create infinite loop illusion */
    cards.forEach(card => {
        const clone = card.cloneNode(true);
        slider.appendChild(clone);
    });

    cards = slider.querySelectorAll(".review-card");
    let index = 0;

    function goToReview(i) {
        index = i;
        const card = cards[index];
        const left = card.offsetLeft - (slider.clientWidth - card.offsetWidth) / 2;
        slider.scrollTo({ left, behavior: "smooth" });
    }

    function nextReview() {
        index++;
        if (index >= cards.length) {
            index = 0;
        }
        goToReview(index);
    }

    let timer = setInterval(nextReview, 3000);

    slider.addEventListener("mouseenter", () => clearInterval(timer));
    slider.addEventListener("mouseleave", () => timer = setInterval(nextReview, 3000));
});

function showSuccessPopup() {
    const popup = document.getElementById("successPopup");
    popup.style.display = "flex";

    setTimeout(() => {
        popup.style.display = "none";
    }, 2500); // auto close after 2.5 seconds
}

  </script>
<!-- SUCCESS POPUP -->
<div id="successPopup">
  <div class="success-box">
      <div class="tick">‚úî</div>
      <h3>Enquiry Submitted!</h3>
      <p>Thank you! Our team will contact you shortly.</p>
  </div>
</div>

</body>
</html>
